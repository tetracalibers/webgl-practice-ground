---
title: ベクトル
category: math
---

## スカラー乗算

ベクトル$\bold{a}$にスカラー$s$を乗じることは、ベクトル$\bold{a}$の各成分にスカラー$s$を乗じること。

$$
s\bold{a} = (sa_x, sa_y, sa_z)
$$

### アダマール積

スケール係数はそれぞれの軸に沿って変えることができる。（**非一様スケーリング**）

スケーリングベクトル$\bold{s}$とベクトル$\bold{a}$のコンポーネントごとの積は**アダマール積**と呼ばれ、演算子$\otimes$で表される。

$$
\bold{s} \otimes \bold{a} = (s_xa_x, s_ya_y, s_za_z)
$$

スケーリングベクトル$s$は、3x3対角スケーリング行列$\bold{S}$をコンパクトに表したもの。

$$
\bold{S} = \begin{bmatrix}
s_x & 0 & 0 \\
0 & s_y & 0 \\
0 & 0 & s_z
\end{bmatrix}
$$

この行列をベクトル$\bold{a}$に右から掛けることで、同様の結果が得られる。

$$
\begin{align*}
\bold{a}\bold{S} &= (a_x, a_y, a_z) \begin{bmatrix}
s_x & 0 & 0 \\
0 & s_y & 0 \\
0 & 0 & s_z
\end{bmatrix} \\
&= (s_xa_x, s_ya_y, s_za_z) \\
&= \bold{s} \otimes \bold{a}
\end{align*}
$$

## 法線ベクトル

ベクトルがある表面に垂直であるとき、その表面に対する**法線**であるという。

- 平面は座標点と法線ベクトルで定義することができる

## ドット積（スカラー積、内積）

### ベクトル射影

$\bold{u}$が単位ベクトルのとき、$|\bold{u}| = 1$であるため、

$$
\bold{a} \cdot \bold{u} = |\bold{a}||\bold{u}|\cos\theta = |\bold{a}|\cos\theta
$$

これは、$\bold{u}$の方向によって定義される無限直線上のベクトル$\bold{a}$への**射影**の長さを表す。

### 共線判定

2つのベクトルが同一直線上にあるとき、2つのベクトルは**共線**であるという。

#### 同方向

2つのベクトル間の角度が0°のとき、$\cos\theta$は$1$になるので、ドット積は次のようになる。

$$
\bold{a} \cdot \bold{b} = |\bold{a}||\bold{b}|
$$

#### 逆方向

2つのベクトル間の角度が180°のとき、$\cos\theta$は$-1$になるので、ドット積は次のようになる。

$$
\bold{a} \cdot \bold{b} = -|\bold{a}||\bold{b}|
$$

### 垂線判定

2つのベクトル間の角度が90°のとき、$\cos\theta$は$0$になるので、ドット積は次のようになる。

$$
\bold{a} \cdot \bold{b} = 0
$$

### 方向判定

ドット積の符号は、2つのベクトルの間の角度によって決まる。

#### 同方向

2つのベクトル間の角度が90°以下のとき、$\cos\theta$は正の値になるので、ドット積は正の値になる。

$$
\bold{a} \cdot \bold{b} > 0
$$

#### 逆方向

2つのベクトル間の角度が90°以上のとき、$\cos\theta$は負の値になるので、ドット積は負の値になる。

$$
\bold{a} \cdot \bold{b} < 0
$$

### 平面と点の距離

2つのベクトルを使えば、平面を定義することができる。

- 平面上の任意の点$\bold{Q}$
- その平面に垂直な単位ベクトル（法線）$\bold{n}$

3D空間において、平面より上または下にある点Pの高さ$h$は、次のように求められる。

$$
h = (\bold{P - Q}) \cdot \bold{n}
$$

これは、$\bold{n}$によって定義される直線上にある$\bold{P - Q}$の射影である。

## クロス積（外積）

2つのベクトルのクロス積は、それらのベクトルに垂直なベクトルを生成する。

$$
\begin{align*}
\bold{a} \times \bold{b} &= (a_yb_z - a_zb_y, a_zb_x - a_xb_z, a_xb_y - a_yb_x) \\
&= (a_yb_z - a_zb_y)\bold{i} + (a_zb_x - a_xb_z)\bold{j} + (a_xb_y - a_yb_x)\bold{k}
\end{align*}
$$

### クロス積の大きさ

2つのベクトル$\bold{a}$と$\bold{b}$の間の角度を$\theta$とすると、$\sin\theta$は次のようになる。

$$
\sin\theta = \frac{|\bold{a} \times \bold{b}|}{|\bold{a}||\bold{b}|}
$$

これを変形すると、クロス積の大きさは次のようになる。

$$
|\bold{a} \times \bold{b}| = |\bold{a}||\bold{b}|\sin\theta
$$

これは、辺が$\bold{a}$と$\bold{b}$になる平行四辺形の面積である。

三角形の面積が平行四辺形の半分であることから、位置ベクトル$\bold{V}_1$、$\bold{V}_2$、$\bold{V}_3$を持つ3つの頂点を持つ三角形の面積は次のようになる。

$$
S_{triangle} = \frac{1}{2} |(\bold{V}_2 - \bold{V}_1) \times (\bold{V}_3 - \bold{V}_1)|
$$

### クロス積の方向

右手座標系では右手の法則、左手座標系では左手の法則に従って、クロス積の方向を決定することができる。

- 右手の法則：右手の親指を$\bold{a}$に、人差し指を$\bold{b}$に向けると、中指の方向が$\bold{a} \times \bold{b}$の方向になる
- 左手の法則：左手の親指を$\bold{a}$に、人差し指を$\bold{b}$に向けると、中指の方向が$\bold{a} \times \bold{b}$の方向になる

## 線形補間（linear interpolation, LERP）

2つの既知の座標点の間の位置を見つけるために、線形補間を使用することができる。

$$
lerp(\bold{a}, \bold{b}, t) = (1 - t)\bold{a} + t\bold{b}
$$

ここで、$t$は0から1の間の値である。

$lerp(\bold{a}, \bold{b}, t)$は、点$\bold{a}$と点$\bold{b}$への線分に沿って$t$%の位置にある点を表す。
