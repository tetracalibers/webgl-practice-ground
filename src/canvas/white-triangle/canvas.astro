<canvas id="gl-canvas" width="300" height="300"></canvas>

<script>
  import { Space } from "@/lib/canvas/index"
  import { Program, Attribute } from "@/lib/webgl/program"
  import vertexSource from "./index.vert?raw"
  import fragmentSource from "./index.frag?raw"
  import { Scene } from "@/lib/webgl/scene"

  window.onload = () => {
    const space = new Space("gl-canvas")
    const canvas = space.canvas()
    const gl = space.gl2()
    if (!canvas || !gl) return

    let scene: Scene

    const configure = () => {
      space.setSize(300, 300)
      // canvasを初期化する色を設定する
      gl.clearColor(0.0, 0.0, 0.0, 1.0)
      // canvasを初期化する際の深度を設定する
      gl.clearDepth(1.0)

      const program = new Program(gl, vertexSource, fragmentSource)

      const attributes: Attribute[] = ["aVertexPosition"]
      const uniforms = ["uMvpMatrix"]

      program.load(attributes, uniforms)

      scene = new Scene(gl, program)

      console.log("configuring successfully")
    }

    configure()
  }
</script>
